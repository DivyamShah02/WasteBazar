<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create New Listing - WasteBazar</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- AOS Animation Library -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/listings.css">
    
    <style>
        /* Custom styles for listing form */
        .listing-form-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0;
        }
        
        .form-card {
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin: 2rem 0;
        }
        
        .form-header {
            text-align: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f8f9fa;
        }
        
        .form-header h1 {
            color: #333;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .form-header p {
            color: #666;
            margin: 0;
        }
        
        .form-section {
            margin-bottom: 2rem;
        }
        
        .section-title {
            color: #4a90e2;
            font-weight: 600;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e9ecef;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .form-control, .form-select {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 0.75rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: #4a90e2;
            box-shadow: 0 0 0 0.2rem rgba(74, 144, 226, 0.25);
        }
        
        .btn-submit {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(74, 144, 226, 0.3);
        }
        
        .btn-cancel {
            background: #6c757d;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            font-size: 1.1rem;
            width: 100%;
            margin-top: 1rem;
        }
        
        .required {
            color: #dc3545;
        }
        
        .input-group-text {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-right: none;
        }
        
        .input-group .form-control {
            border-left: none;
        }
        
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        
        .loading-spinner {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
        }
        
        .alert {
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        
        .breadcrumb {
            background: none;
            padding: 0;
            margin-bottom: 2rem;
        }
        
        .breadcrumb-item a {
            color: white;
            text-decoration: none;
        }
        
        .breadcrumb-item.active {
            color: rgba(255, 255, 255, 0.8);
        }
    </style>
</head>

<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <div class="mt-3">Creating your listing...</div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="listing-form-container">
        <div class="container">
            <!-- Breadcrumb -->
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/index.html">Home</a></li>
                    <li class="breadcrumb-item"><a href="/seller_profile.html">Profile</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Create Listing</li>
                </ol>
            </nav>

            <!-- Form Card -->
            <div class="form-card" data-aos="fade-up">
                <div class="form-header">
                    <h1><i class="fas fa-plus-circle me-2"></i>Create New Listing</h1>
                    <p>List your waste materials to connect with potential buyers</p>
                </div>

                <!-- Alert Messages -->
                <div id="alertContainer"></div>

                <!-- Listing Form -->
                <form id="listingForm" novalidate>
                    <!-- Basic Information Section -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <i class="fas fa-info-circle me-2"></i>Basic Information
                        </h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="category" class="form-label">
                                        Category <span class="required">*</span>
                                    </label>
                                    <select class="form-select" id="category" name="category" required>
                                        <option value="">Loading categories...</option>
                                    </select>
                                    <div class="invalid-feedback">Please select a category.</div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="subcategory" class="form-label">
                                        Subcategory <span class="required">*</span>
                                    </label>
                                    <input type="text" class="form-control" id="subcategory" name="subcategory" 
                                           placeholder="e.g., PET Bottles, Steel Scrap, etc." required maxlength="100">
                                    <div class="invalid-feedback">Please enter a subcategory.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quantity & Unit Section -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <i class="fas fa-weight-hanging me-2"></i>Quantity & Unit
                        </h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="quantity" class="form-label">
                                        Quantity <span class="required">*</span>
                                    </label>
                                    <input type="number" class="form-control" id="quantity" name="quantity" 
                                           placeholder="Enter quantity" required min="0.01" step="0.01">
                                    <div class="invalid-feedback">Please enter a valid quantity.</div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="unit" class="form-label">
                                        Unit <span class="required">*</span>
                                    </label>
                                    <select class="form-select" id="unit" name="unit" required>
                                        <option value="">Select Unit</option>
                                        <option value="Tons">Tons</option>
                                        <option value="Kilograms">Kilograms</option>
                                        <option value="Pounds">Pounds</option>
                                        <option value="Pieces">Pieces</option>
                                        <option value="Liters">Liters</option>
                                        <option value="Cubic Meters">Cubic Meters</option>
                                        <option value="Bags">Bags</option>
                                        <option value="Containers">Containers</option>
                                    </select>
                                    <div class="invalid-feedback">Please select a unit.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Description Section -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <i class="fas fa-file-alt me-2"></i>Description
                        </h3>
                        
                        <div class="form-group">
                            <label for="description" class="form-label">
                                Description <span class="required">*</span>
                            </label>
                            <textarea class="form-control" id="description" name="description" rows="4" 
                                      placeholder="Describe your waste material in detail (quality, condition, packaging, etc.)" 
                                      required maxlength="1000"></textarea>
                            <div class="form-text">Provide detailed information to attract potential buyers.</div>
                            <div class="invalid-feedback">Please enter a description.</div>
                        </div>
                    </div>

                    <!-- Location Section -->
                    <div class="form-section">
                        <h3 class="section-title">
                            <i class="fas fa-map-marker-alt me-2"></i>Location Information
                        </h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="city_location" class="form-label">
                                        City <span class="required">*</span>
                                    </label>
                                    <input type="text" class="form-control" id="city_location" name="city_location" 
                                           placeholder="Enter city name" required maxlength="100">
                                    <div class="invalid-feedback">Please enter the city.</div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="state_location" class="form-label">
                                        State <span class="required">*</span>
                                    </label>
                                    <select class="form-select" id="state_location" name="state_location" required>
                                        <option value="">Select State</option>
                                        <option value="Andhra Pradesh">Andhra Pradesh</option>
                                        <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                        <option value="Assam">Assam</option>
                                        <option value="Bihar">Bihar</option>
                                        <option value="Chhattisgarh">Chhattisgarh</option>
                                        <option value="Goa">Goa</option>
                                        <option value="Gujarat">Gujarat</option>
                                        <option value="Haryana">Haryana</option>
                                        <option value="Himachal Pradesh">Himachal Pradesh</option>
                                        <option value="Jharkhand">Jharkhand</option>
                                        <option value="Karnataka">Karnataka</option>
                                        <option value="Kerala">Kerala</option>
                                        <option value="Madhya Pradesh">Madhya Pradesh</option>
                                        <option value="Maharashtra">Maharashtra</option>
                                        <option value="Manipur">Manipur</option>
                                        <option value="Meghalaya">Meghalaya</option>
                                        <option value="Mizoram">Mizoram</option>
                                        <option value="Nagaland">Nagaland</option>
                                        <option value="Odisha">Odisha</option>
                                        <option value="Punjab">Punjab</option>
                                        <option value="Rajasthan">Rajasthan</option>
                                        <option value="Sikkim">Sikkim</option>
                                        <option value="Tamil Nadu">Tamil Nadu</option>
                                        <option value="Telangana">Telangana</option>
                                        <option value="Tripura">Tripura</option>
                                        <option value="Uttar Pradesh">Uttar Pradesh</option>
                                        <option value="Uttarakhand">Uttarakhand</option>
                                        <option value="West Bengal">West Bengal</option>
                                        <option value="Delhi">Delhi</option>
                                    </select>
                                    <div class="invalid-feedback">Please select a state.</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="pincode_location" class="form-label">
                                        Pincode <span class="required">*</span>
                                    </label>
                                    <input type="text" class="form-control" id="pincode_location" name="pincode_location" 
                                           placeholder="Enter 6-digit pincode" required pattern="[0-9]{6}" maxlength="6">
                                    <div class="invalid-feedback">Please enter a valid 6-digit pincode.</div>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="address" class="form-label">
                                        Full Address <span class="required">*</span>
                                    </label>
                                    <textarea class="form-control" id="address" name="address" rows="3" 
                                              placeholder="Enter complete address" required maxlength="500"></textarea>
                                    <div class="invalid-feedback">Please enter the full address.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Form Actions -->
                    <div class="form-section">
                        <div class="row">
                            <div class="col-md-6">
                                <button type="submit" class="btn btn-submit">
                                    <i class="fas fa-plus-circle me-2"></i>Create Listing
                                </button>
                            </div>
                            <div class="col-md-6">
                                <button type="button" class="btn btn-cancel" onclick="window.history.back()">
                                    <i class="fas fa-times me-2"></i>Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- API Caller -->
    <script src="/static/js/api_caller.js"></script>
    <!-- Listing Form JS -->
    <script src="/static/js/listing_form.js"></script>
    
    <script>
        // Initialize AOS animations
        AOS.init({
            duration: 1000,
            once: true,
            offset: 100,
        });
        
        // Initialize listing form
        window.onload = function() {
            ListingFormApp("{{ csrf_token }}", "/marketplace-api/seller-listings/");
        };
    </script>
</body>
</html>
